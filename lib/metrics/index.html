<html>
<head>
<script src="http://localhost:3000/socket.io.js"></script>
<script src="http://localhost:3000/coffee-script.js"></script>
<script>

	exists = ( oldObject , newObject ) ->
	if oldObject.name is newObject.name and oldObject.mean is newObject.mean and oldObject.timestamp is newObject.timestamp 
		return true
	else
		return false


metrics = []
socket = require('socket.io-client').connect('http://localhost:9001')
socket.on 'metrics', (data) ->
	data = JSON.parse data

	for metric in data.metrics
		if not metrics[metric.name]?
    		metrics[metric.name] = []
    	exitsObject = false
    	for object in metrics[metric.name]
    		exitsObject = exists( object , metric )
    	metrics[metric.name].push(metric) if not exitsObject





  var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script>
</head>
<body></body>
</html>